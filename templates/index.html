{% extends "base.html" %}

{% block title %}å¸Œå®é˜…è¯» Â· ä¸€é¡µçŸ¥æ˜Ÿæµ·{% endblock %}

{% block navigation %}
<nav class="breadcrumb">
    <a href="{{ url_for('index') }}" class="nav-link">ğŸ  é¦–é¡µ</a>
    <a href="{{ url_for('local_reader') }}" class="nav-link">ğŸ“± æŸ¥çœ‹æœ¬åœ°ä¹¦</a>
    {% if current_path %}
        {% set path_parts = current_path.split('/') %}
        {% for part in path_parts %}
            {% if not loop.last %}
                <span class="separator">></span>
                <a href="{{ url_for('index', path='/'.join(path_parts[:loop.index])) }}" class="nav-link">{{ part }}</a>
            {% else %}
                <span class="separator">></span>
                <span class="current-folder">{{ part }}</span>
            {% endif %}
        {% endfor %}
    {% endif %}
</nav>
{% endblock %}

{% block content %}
<div class="file-browser">
    {% if parent_path is not none %}
    <div class="file-item directory">
        <a href="{{ url_for('index', path=parent_path) }}" class="file-link">
            <span class="file-icon">ğŸ“</span>
            <span class="file-name">.. (è¿”å›ä¸Šçº§)</span>
        </a>
    </div>
    {% endif %}
    
    {% for directory in directories %}
    <div class="file-item directory">
        <a href="{{ url_for('index', path=directory.path) }}" class="file-link">
            <span class="file-icon">ğŸ“</span>
            <span class="file-name">{{ directory.name }}</span>
        </a>
    </div>
    {% endfor %}
    
    {% for file in files %}
    <div class="file-item file">
        <div class="file-info">
            <span class="file-icon">
                {% if file.is_text %}ğŸ“„{% else %}ğŸ“{% endif %}
            </span>
            <span class="file-name">{{ file.name }}</span>
            <span class="file-type-label">{{ file.type_label }}</span>
            <span class="file-size">{{ file.size }}</span>
        </div>
        <div class="file-actions">
            {% if file.is_text %}
                <a href="{{ url_for('read_file', path=file.path) }}" class="btn btn-primary">ğŸ“– é˜…è¯»</a>
            {% else %}
                <a href="{{ url_for('download_file', path=file.path) }}" class="btn btn-secondary">â¬‡ï¸ ä¸‹è½½</a>
            {% endif %}
        </div>
    </div>
    {% endfor %}
    
    {% if not directories and not files %}
    <div class="empty-folder">
        <p>ğŸ“‚ æ­¤æ–‡ä»¶å¤¹ä¸ºç©º</p>
    </div>
    {% endif %}
</div>

<div class="stats">
    <p>
        ğŸ“ æ–‡ä»¶å¤¹: {{ directories|length }} ä¸ª | 
        ğŸ“„ æ–‡ä»¶: {{ files|length }} ä¸ª
    </p>
</div>
{% endblock %}
